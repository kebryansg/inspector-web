<app-card [cardTitle]="'Formulario - Inspección'">
  <dx-form [formData]="itemInspection()"
           [readOnly]="true">
    <dxi-item [dataField]="'RUC'"
              [label]="{text: 'RUC'}"
    />
    <dxi-item [dataField]="'NombreComercial'"
              [label]="{text: 'Nombre Comercial'}"
    />
    <dxi-item [dataField]="'RazonSocial'"
              [label]="{text: 'Razon Social'}"
    />
    <dxi-item [dataField]="'Sector'"
              [label]="{text: 'Sector'}"
    />
    <dxi-item [dataField]="'Inspector'"
              [label]="{text: 'Inspector'}"
    />
    <dxi-item [dataField]="'FechaInspeccion'"
              editorType="dxDateBox"
              [editorOptions]="{displayFormat:'MMMM dd, yyyy HH:mm'}"
              [label]="{text: 'Fecha Inspección'}"
    />
    <dxi-item [dataField]="'FechaRegistro'"
              editorType="dxDateBox"
              [editorOptions]="{displayFormat:'MMMM dd, yyyy HH:mm'}"
              [label]="{text: 'Fecha Registro'}"
    />
  </dx-form>

  <div class="row mt-3">
    <div class="col-12 d-flex justify-content-end gap-2">
      <button type="button"
              class="btn btn-danger"
              (click)="cancelReview()">
        Cancelar
      </button>
      <button type="button"
              class="btn btn-primary">
        <i class="fa fa-mail"></i>
        Enviar resultados
      </button>
    </div>
  </div>

</app-card>

<app-card cardClass="mt-4" [cardTitle]="'Resultados'">

  @for (item of (detailsInspection() | keyvalue); track item.key) {

    <div class="dx-fieldset">
      <div class="dx-fieldset-header">
        {{ getSection(item.key) }}
      </div>

      <section class="d-grid">
        @for (criteria of item.value; track criteria.idDetail; let last = $last) {

          <div class="dx-custom-field">
            <div class="field-label">
              {{ criteria.descriptionComponent }}
            </div>
            <div class="value-static">

              @switch (criteria.typeComp) {
                @case ('DEC') {
                  <dx-check-box [value]="criteria.result"
                                [readOnly]="true"
                  />
                }
                @case ('QUN') {
                  {{ criteria.result | number: '1.2-2' }}
                }
                @case ('QUA') {
                  {{ criteria.result.display }}
                }
                @case ('CAT') {

                  @for (catalog of criteria.result; track catalog.id) {
                    <section class="container-catalog ">
                      <span class="font-weight-bold">{{ catalog.display }}</span>
                      <span>{{ catalog.data }}</span>
                    </section>
                  }
                }

              }

            </div>
          </div>

          @if (!last) {
            <hr class="row-separator">
          }
        }
      </section>

    </div>
  }

</app-card>
